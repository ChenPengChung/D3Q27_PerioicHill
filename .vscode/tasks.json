{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "SSH to cfdlab",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\ssh-connect.ps1' -ServerCombo '${input:serverCombo}'",
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "runOptions": {
        "runOn": "folderOpen"
      },
      "problemMatcher": []
    },
    {
      "label": "Reconnect",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\ssh-connect.ps1' -ServerCombo '${input:serverCombo}'",
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "Switch Node",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\ssh-connect.ps1' -ServerCombo '${input:serverCombo}'",
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "SSH to cfdlab (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "chenpengchung@140.114.58.87",
        "-t",
        "ssh -t cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill; exec bash'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "SSH to cfdlab (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "chenpengchung@140.114.58.154",
        "-t",
        "ssh -t cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill; exec bash'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "Switch Node (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "chenpengchung@140.114.58.87",
        "-t",
        "ssh -t cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill; exec bash'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "Switch Node (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "chenpengchung@140.114.58.154",
        "-t",
        "ssh -t cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill; exec bash'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "Reconnect (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "chenpengchung@140.114.58.87",
        "-t",
        "ssh -t cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill; exec bash'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "Reconnect (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "chenpengchung@140.114.58.154",
        "-t",
        "ssh -t cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill; exec bash'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": []
    },
    {
      "label": "Compile + Run (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill && nvcc main.cu -arch=sm_35 -I/home/chenpengchung/openmpi-3.0.3/include -L/home/chenpengchung/openmpi-3.0.3/lib -lmpi -o a.out && nohup mpirun -np ${input:gpuCount} ./a.out > log$(date +%Y%m%d) 2>&1 &'"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Compile + Run (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill && nvcc main.cu -arch=sm_35 -I/home/chenpengchung/openmpi-3.0.3/include -L/home/chenpengchung/openmpi-3.0.3/lib -lmpi -o a.out && nohup mpirun -np ${input:gpuCount} ./a.out > log$(date +%Y%m%d) 2>&1 &'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Check Running Jobs (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'ps aux | grep a.out | grep -v grep'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Check Running Jobs (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'ps aux | grep a.out | grep -v grep'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Kill Running Job (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'pkill -f a.out || pkill mpirun'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Kill Running Job (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh",
        "-pw", "1256",
        "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'pkill -f a.out || pkill mpirun'"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Sync (Watch)",
      "type": "shell",
      "command": "& 'c:\\Users\\88697.CHENPENGCHUNG12\\Desktop\\GitHub-PeriodicHill\\D3Q27_PeriodicHill\\.vscode\\mobaxterm.ps1' watch",
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": false
      },
      "isBackground": true,
      "problemMatcher": []
    },
    {
      "label": "Quick Sync (Push if changed)",
      "type": "shell",
      "command": "& 'c:\\Users\\88697.CHENPENGCHUNG12\\Desktop\\GitHub-PeriodicHill\\D3Q27_PeriodicHill\\.vscode\\mobaxterm.ps1' autopush",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Download (Start)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpull",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Download (.87 only)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpull .87",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Download (.154 only)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpull .154",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Download (Status)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpull status",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Download (Stop)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpull stop",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Upload (Start)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpush",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Upload (Status)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpush status",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Auto Upload (Stop)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' watchpush stop",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Sync Status (Upload + Download)",
      "type": "shell",
      "command": "& '${workspaceFolder}\\.vscode\\mobaxterm.ps1' syncstatus",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    // ============ GPU / System Monitoring ============
    {
      "label": "GPU Status (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'nvidia-smi'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "GPU Status (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'nvidia-smi'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "System Load (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'echo \"=== UPTIME ===\"; uptime; echo; echo \"=== MEMORY ===\"; free -h; echo; echo \"=== DISK ===\"; df -h /home'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "System Load (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'echo \"=== UPTIME ===\"; uptime; echo; echo \"=== MEMORY ===\"; free -h; echo; echo \"=== DISK ===\"; df -h /home'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Log Monitoring ============
    {
      "label": "Tail Log (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"=== Latest log ===\"; ls -lt log* 2>/dev/null | head -1; echo; tail -50 $(ls -t log* 2>/dev/null | head -1) 2>/dev/null || echo No log found'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Tail Log (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"=== Latest log ===\"; ls -lt log* 2>/dev/null | head -1; echo; tail -50 $(ls -t log* 2>/dev/null | head -1) 2>/dev/null || echo No log found'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Disk & Files ============
    {
      "label": "Disk Usage (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'echo \"=== Disk Total ===\"; df -h /home; echo; echo \"=== Project Size ===\"; du -sh /home/chenpengchung/D3Q27_PeriodicHill; echo; echo \"=== Subdirectories ===\"; du -sh /home/chenpengchung/D3Q27_PeriodicHill/*/ 2>/dev/null'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Disk Usage (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'echo \"=== Disk Total ===\"; df -h /home; echo; echo \"=== Project Size ===\"; du -sh /home/chenpengchung/D3Q27_PeriodicHill; echo; echo \"=== Subdirectories ===\"; du -sh /home/chenpengchung/D3Q27_PeriodicHill/*/ 2>/dev/null'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "List Remote Files (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"=== Files ===\"; ls -lah --color=never; echo; echo \"=== Result count ===\"; ls result/*.vtk 2>/dev/null | wc -l; echo \"VTK files in result/\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "List Remote Files (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"=== Files ===\"; ls -lah --color=never; echo; echo \"=== Result count ===\"; ls result/*.vtk 2>/dev/null | wc -l; echo \"VTK files in result/\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Compile Only (No Run) ============
    {
      "label": "Compile Only (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill && nvcc main.cu -arch=sm_35 -I/home/chenpengchung/openmpi-3.0.3/include -L/home/chenpengchung/openmpi-3.0.3/lib -lmpi -o a.out && echo \"=== Compile SUCCESS ===\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Compile Only (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill && nvcc main.cu -arch=sm_35 -I/home/chenpengchung/openmpi-3.0.3/include -L/home/chenpengchung/openmpi-3.0.3/lib -lmpi -o a.out && echo \"=== Compile SUCCESS ===\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Quick Dashboard ============
    {
      "label": "Dashboard (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'echo \"========================================\"; echo \"  DASHBOARD - cfdlab-ib$(hostname | grep -o \"[0-9]*$\" || echo ?) via .87\"; echo \"========================================\"; echo; echo \"--- RUNNING JOBS ---\"; ps aux | grep a.out | grep -v grep || echo \"  No jobs running\"; echo; echo \"--- GPU STATUS ---\"; nvidia-smi --query-gpu=index,name,utilization.gpu,memory.used,memory.total,temperature.gpu --format=csv,noheader 2>/dev/null || echo \"  nvidia-smi not available\"; echo; echo \"--- SYSTEM ---\"; uptime; free -h | head -2; echo; echo \"--- LATEST LOG (last 10 lines) ---\"; cd /home/chenpengchung/D3Q27_PeriodicHill && tail -10 $(ls -t log* 2>/dev/null | head -1) 2>/dev/null || echo \"  No log found\"; echo; echo \"--- DISK ---\"; df -h /home | tail -1; echo \"========================================\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Dashboard (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'echo \"========================================\"; echo \"  DASHBOARD - cfdlab-ib$(hostname | grep -o \"[0-9]*$\" || echo ?) via .154\"; echo \"========================================\"; echo; echo \"--- RUNNING JOBS ---\"; ps aux | grep a.out | grep -v grep || echo \"  No jobs running\"; echo; echo \"--- GPU STATUS ---\"; nvidia-smi --query-gpu=index,name,utilization.gpu,memory.used,memory.total,temperature.gpu --format=csv,noheader 2>/dev/null || echo \"  nvidia-smi not available\"; echo; echo \"--- SYSTEM ---\"; uptime; free -h | head -2; echo; echo \"--- LATEST LOG (last 10 lines) ---\"; cd /home/chenpengchung/D3Q27_PeriodicHill && tail -10 $(ls -t log* 2>/dev/null | head -1) 2>/dev/null || echo \"  No log found\"; echo; echo \"--- DISK ---\"; df -h /home | tail -1; echo \"========================================\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Result Management ============
    {
      "label": "Count Results (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"=== VTK Files ===\"; ls result/*.vtk 2>/dev/null | wc -l; echo \"files in result/\"; echo; echo \"=== Latest 5 ===\"; ls -lt result/*.vtk 2>/dev/null | head -5; echo; echo \"=== Backup Files ===\"; ls backup/ 2>/dev/null | wc -l; echo \"files in backup/\"; echo; echo \"=== Statistics Files ===\"; ls statistics/ 2>/dev/null | wc -l; echo \"files in statistics/\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Count Results (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"=== VTK Files ===\"; ls result/*.vtk 2>/dev/null | wc -l; echo \"files in result/\"; echo; echo \"=== Latest 5 ===\"; ls -lt result/*.vtk 2>/dev/null | head -5; echo; echo \"=== Backup Files ===\"; ls backup/ 2>/dev/null | wc -l; echo \"files in backup/\"; echo; echo \"=== Statistics Files ===\"; ls statistics/ 2>/dev/null | wc -l; echo \"files in statistics/\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Clean Results (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "ssh cfdlab-ib${input:nodeFor87} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"Before:\"; du -sh result/ backup/ statistics/ 2>/dev/null; rm -f result/*.vtk result/*.plt result/*.dat; echo; echo \"After:\"; du -sh result/ backup/ statistics/ 2>/dev/null; echo \"=== Result files cleaned ===\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Clean Results (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "ssh cfdlab-ib${input:nodeFor154} 'cd /home/chenpengchung/D3Q27_PeriodicHill && echo \"Before:\"; du -sh result/ backup/ statistics/ 2>/dev/null; rm -f result/*.vtk result/*.plt result/*.dat; echo; echo \"After:\"; du -sh result/ backup/ statistics/ 2>/dev/null; echo \"=== Result files cleaned ===\"'"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Check All Nodes ============
    {
      "label": "Check All Nodes (.87)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.87",
        "for n in 2 3 5 6; do echo -n \"ib$n: \"; ssh -o ConnectTimeout=3 cfdlab-ib$n 'uptime' 2>/dev/null && echo '' || echo 'OFFLINE'; done"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Check All Nodes (.154)",
      "type": "process",
      "command": "C:\\Program Files\\PuTTY\\plink.exe",
      "args": [
        "-ssh", "-pw", "1256", "-batch",
        "chenpengchung@140.114.58.154",
        "for n in 1 4 7 9; do echo -n \"ib$n: \"; ssh -o ConnectTimeout=3 cfdlab-ib$n 'uptime' 2>/dev/null && echo '' || echo 'OFFLINE'; done"
      ],
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    // ============ Local Build ============
    {
      "label": "Build main.exe (MinGW)",
      "type": "shell",
      "command": "C:/Strawberry/c/bin/g++.exe",
      "args": [
        "-std=c++17",
        "-O3",
        "-g",
        "-fopenmp",
        "${workspaceFolder}\\main.cpp",
        "-o",
        "${workspaceFolder}\\main.exe"
      ],
      "options": {
        "shell": {
          "executable": "powershell.exe"
        },
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": ["$gcc"],
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "type": "cppbuild",
      "label": "C/C++: g++.exe build active file",
      "command": "C:/Strawberry/c/bin/g++.exe",
      "args": [
        "-fdiagnostics-color=always",
        "-g",
        "${file}",
        "-o",
        "${fileDirname}\\${fileBasenameNoExtension}.exe",
        "-fopenmp"
      ],
      "options": {
        "cwd": "C:/Strawberry/c/bin"
      },
      "problemMatcher": ["$gcc"],
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "detail": "Task generated by Debugger."
    }
  ],
  "inputs": [
    {
      "id": "serverCombo",
      "type": "pickString",
      "description": "選擇連線目標 (母機 → 子機)",
      "options": [
        {"label": ".87 → ib2", "value": "87:2"},
        {"label": ".87 → ib3", "value": "87:3"},
        {"label": ".87 → ib5", "value": "87:5"},
        {"label": ".87 → ib6", "value": "87:6"},
        {"label": ".154 → ib1", "value": "154:1"},
        {"label": ".154 → ib4", "value": "154:4"},
        {"label": ".154 → ib7", "value": "154:7"},
        {"label": ".154 → ib9", "value": "154:9"}
      ],
      "default": "87:3"
    },
    {
      "id": "nodeFor87",
      "type": "pickString",
      "description": "選擇子機 (via .87)",
      "options": [
        {"label": "ib2", "value": "2"},
        {"label": "ib3", "value": "3"},
        {"label": "ib5", "value": "5"},
        {"label": "ib6", "value": "6"}
      ],
      "default": "3"
    },
    {
      "id": "nodeFor154",
      "type": "pickString",
      "description": "選擇子機 (via .154)",
      "options": [
        {"label": "ib1", "value": "1"},
        {"label": "ib4", "value": "4"},
        {"label": "ib7", "value": "7"},
        {"label": "ib9", "value": "9"}
      ],
      "default": "4"
    },
    {
      "id": "gpuCount",
      "type": "pickString",
      "description": "選擇要使用幾顆 GPU",
      "options": ["4", "8"],
      "default": "4"
    }
  ]
}
